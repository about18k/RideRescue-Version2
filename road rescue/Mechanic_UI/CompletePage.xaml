<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="road_rescue.CompletePage"
             Shell.TabBarIsVisible="False"
             BackgroundColor="#F0F2F5"
             Title="Completed"
             Shell.FlyoutBehavior="Disabled"

             >

    <ContentPage.Resources>
        <TapGestureRecognizer x:Key="TapGesture" Tapped="OnImageClicked" />
    </ContentPage.Resources>

    <AbsoluteLayout>

        <!-- Custom Drawer Menu -->
        <Grid x:Name="DrawerMenu"
              WidthRequest="280"
              AbsoluteLayout.LayoutBounds="0,0,280,1"
              AbsoluteLayout.LayoutFlags="PositionProportional,HeightProportional"
              TranslationX="-280"
              ZIndex="10"
              BackgroundColor="White">

            <VerticalStackLayout Spacing="0" VerticalOptions="FillAndExpand">

                <!-- Blue Header with Centered Logo -->
                <Grid BackgroundColor="#21499F" HeightRequest="140" Padding="20">
                    <Image Source="logo2.png" 
                           Aspect="AspectFit"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           HeightRequest="80" />
                </Grid>

                <!-- Profile Section -->
                <Frame BackgroundColor="#D1FAE5"
       CornerRadius="20"
       Padding="16"
       HasShadow="True"
       HorizontalOptions="Fill"
       Margin="20,15">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnProfileTapped" />
                    </Frame.GestureRecognizers>
                    <HorizontalStackLayout Spacing="16" VerticalOptions="Center">
                        <Frame Padding="0"
                               WidthRequest="65"
                               HeightRequest="65"
                               CornerRadius="32.5"
                               IsClippedToBounds="True"
                               HasShadow="False"
                               BackgroundColor="#34D399">
                            <Image Source="stayvepic.png"
                                   Aspect="AspectFill"
                                   WidthRequest="65"
                                   HeightRequest="65" />
                        </Frame>
                        <VerticalStackLayout VerticalOptions="Center">
                            <Label Text="Stayve Alreach T. Fedillaga"
                                   FontAttributes="Bold"
                                   FontSize="18"
                                   TextColor="#111827" />
                            <Label Text="Mechanic"
                                   FontSize="14"
                                   TextColor="#6B7280" />
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                </Frame>

                <!-- Menu Items -->
                <ScrollView>
                    <VerticalStackLayout Padding="0" Spacing="0" BackgroundColor="#F9FBFF">

                        <!-- Notifications -->
                        <Grid Padding="16,14" BackgroundColor="#E5E9FF" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Source="notifications_icon.png" HeightRequest="24" WidthRequest="24" VerticalOptions="Center" />
                            <Label Text="Notifications" FontSize="18" FontAttributes="Bold" TextColor="#21499F" VerticalOptions="Center" Grid.Column="1" />
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnNotificationsClicked" />
                            </Grid.GestureRecognizers>
                        </Grid>
                        <BoxView HeightRequest="1" BackgroundColor="#D9E4FF" />

                        <!-- Request -->
                        <Grid Padding="16,14" BackgroundColor="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Source="request_icon.png" HeightRequest="24" WidthRequest="24" VerticalOptions="Center" />
                            <Label Text="Request" FontSize="18" FontAttributes="Bold" TextColor="#21499F" VerticalOptions="Center" Grid.Column="1" />
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnRequestClicked" />
                            </Grid.GestureRecognizers>
                        </Grid>
                        <BoxView HeightRequest="1" BackgroundColor="#D9E4FF" />

                        <!-- Messages -->
                        <Grid Padding="16,14" BackgroundColor="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Source="messages_icon.png" HeightRequest="24" WidthRequest="24" VerticalOptions="Center" />
                            <Label Text="Messages" FontSize="18" FontAttributes="Bold" TextColor="#21499F" VerticalOptions="Center" Grid.Column="1" />
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnMessagesClicked" />
                            </Grid.GestureRecognizers>
                        </Grid>
                        <BoxView HeightRequest="1" BackgroundColor="#D9E4FF" />

                        <!-- Completed -->
                        <Grid Padding="16,14" BackgroundColor="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image Source="completed_icon.png" HeightRequest="24" WidthRequest="24" VerticalOptions="Center" />
                            <Label Text="Completed" FontSize="18" FontAttributes="Bold" TextColor="#21499F" VerticalOptions="Center" Grid.Column="1" />
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnCompleteClicked" />
                            </Grid.GestureRecognizers>
                        </Grid>
                    </VerticalStackLayout>
                </ScrollView>

                <Frame Grid.Row="1"
                        BackgroundColor="#F3F4F6"
                        HasShadow="False"
                        Padding="16"
                        Margin="0"
                        BorderColor="#E5E7EB">
                                            <Label Text="Logout"
                            FontSize="18"
                            FontAttributes="Bold"
                            TextColor="Black"
                            HorizontalOptions="Start"
                            Margin="85,200"
                            VerticalOptions="Center">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnLogoutTapped" />
                        </Label.GestureRecognizers>
                    </Label>
                </Frame>
            </VerticalStackLayout>
            
            
            
        </Grid>

        <!-- Overlay to dim main content and close drawer on tap -->
        <BoxView x:Name="DrawerOverlay"
                 AbsoluteLayout.LayoutBounds="0,0,1,1"
                 AbsoluteLayout.LayoutFlags="All"
                 BackgroundColor="#000000"
                 Opacity="0.4"
                 IsVisible="False"
                 ZIndex="9">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Main Content Area -->
        <Grid AbsoluteLayout.LayoutBounds="0,0,1,1"
              AbsoluteLayout.LayoutFlags="All"
              ZIndex="5"
              BackgroundColor="#F0F2F5"
              RowDefinitions="Auto,*">

            <!-- Top Bar with Menu Button and "Completed" Text -->
            <Grid BackgroundColor="White"
                  Padding="15,10"
                  ColumnDefinitions="Auto,Auto,*"
                  VerticalOptions="Start"
                  HeightRequest="60"
                  Row="0">

                <Label Text="☰"
                       FontSize="30"
                       HorizontalOptions="End"
                       VerticalOptions="Center"
                       Margin="0,0,0,4"
                       Grid.Column="2">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped" />
                    </Label.GestureRecognizers>
                </Label>

                <Label Text="Completed"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="#21499F"
                       VerticalOptions="Center"
                       HorizontalOptions="Start"
                       Margin="10,0,0,0"
                       Grid.Column="1" />
            </Grid>

            <!-- Scrollable Completed Request Cards -->
            <ScrollView Grid.Row="1">
                <VerticalStackLayout Spacing="15" Padding="10,10,10,20">

                    <!-- Driver 1 -->
                    <Frame BackgroundColor="#F9F9F9"
                           CornerRadius="15"
                           Padding="15"
                           HasShadow="True"
                           BorderColor="#E0E0E0"
                           Margin="0,0,0,10">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Name: Stayve Alreach Fedillaga" FontSize="14" TextColor="#111827" />
                            <Label Text="Vehicle Type: Sedan" FontSize="14" TextColor="#111827" />
                            <Label Text="Plate Number: ABC 1234" FontSize="14" TextColor="#111827" />
                            <Label Text="Service Provided: Tire replacement" FontSize="14" TextColor="#111827" />
                            <Label Text="Mechanic Assigned: Mark Anthony Delos Reyes" FontSize="14" TextColor="#111827" />
                            <Label Text="Assistance Time: 2025-05-30 11:58 PM" FontSize="14" TextColor="#111827" />
                            <Label Text="Landmark/Remarks: Near City Mall parking lot" FontSize="14" TextColor="#111827" />
                            <Label Text="Location: (14.5995° N, 120.9842° E)" FontSize="14" TextColor="#111827" />
                            <Label Text="Image Uploaded: (Click to view)"
                                   FontSize="14"
                                   TextColor="#3B82F6"
                                   GestureRecognizers="{StaticResource TapGesture}" />
                            <Label Text="Status: Rescued successfully"
                                   FontSize="14"
                                   TextColor="#4CAF50"
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Driver 2 -->
                    <Frame BackgroundColor="#F9F9F9"
                           CornerRadius="15"
                           Padding="15"
                           HasShadow="True"
                           BorderColor="#E0E0E0"
                           Margin="0,0,0,10">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Name: Michael Saragena" FontSize="14" TextColor="#111827" />
                            <Label Text="Vehicle Type: Pickup Truck" FontSize="14" TextColor="#111827" />
                            <Label Text="Plate Number: DEF 5678" FontSize="14" TextColor="#111827" />
                            <Label Text="Service Provided: Battery jump start" FontSize="14" TextColor="#111827" />
                            <Label Text="Mechanic Assigned: Sarah Lopez" FontSize="14" TextColor="#111827" />
                            <Label Text="Assistance Time: 2025-05-29 03:20 PM" FontSize="14" TextColor="#111827" />
                            <Label Text="Landmark/Remarks: Near City Hospital" FontSize="14" TextColor="#111827" />
                            <Label Text="Location: (14.6100° N, 120.9750° E)" FontSize="14" TextColor="#111827" />
                            <Label Text="Image Uploaded: (Click to view)"
                                   FontSize="14"
                                   TextColor="#3B82F6"
                                   GestureRecognizers="{StaticResource TapGesture}" />
                            <Label Text="Status: Rescued successfully"
                                   FontSize="14"
                                   TextColor="#4CAF50"
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Driver 3 -->
                    <Frame BackgroundColor="#F9F9F9"
                           CornerRadius="15"
                           Padding="15"
                           HasShadow="True"
                           BorderColor="#E0E0E0"
                           Margin="0,0,0,10">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Name: Archie Villamor" FontSize="14" TextColor="#111827" />
                            <Label Text="Vehicle Type: SUV" FontSize="14" TextColor="#111827" />
                            <Label Text="Plate Number: GHI 9101" FontSize="14" TextColor="#111827" />
                            <Label Text="Service Provided: Tire repair" FontSize="14" TextColor="#111827" />
                            <Label Text="Mechanic Assigned: John Smith" FontSize="14" TextColor="#111827" />
                            <Label Text="Assistance Time: 2025-05-28 10:15 AM" FontSize="14" TextColor="#111827" />
                            <Label Text="Landmark/Remarks: Near Central Park" FontSize="14" TextColor="#111827" />
                            <Label Text="Location: (14.6200° N, 120.9650° E)" FontSize="14" TextColor="#111827" />
                            <Label Text="Image Uploaded: (Click to view)"
                                   FontSize="14"
                                   TextColor="#3B82F6"
                                   GestureRecognizers="{StaticResource TapGesture}" />
                            <Label Text="Status: Rescued successfully"
                                   FontSize="14"
                                   TextColor="#4CAF50"
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Driver 4 -->
                    <Frame BackgroundColor="#F9F9F9"
                           CornerRadius="15"
                           Padding="15"
                           HasShadow="True"
                           BorderColor="#E0E0E0"
                           Margin="0,0,0,10">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Name: Kimberly Faith Ytac" FontSize="14" TextColor="#111827" />
                            <Label Text="Vehicle Type: Sedan" FontSize="14" TextColor="#111827" />
                            <Label Text="Plate Number: JKL 2345" FontSize="14" TextColor="#111827" />
                            <Label Text="Service Provided: Engine repair" FontSize="14" TextColor="#111827" />
                            <Label Text="Mechanic Assigned: Alex Martinez" FontSize="14" TextColor="#111827" />
                            <Label Text="Assistance Time: 2025-05-27 04:10 PM" FontSize="14" TextColor="#111827" />
                            <Label Text="Landmark/Remarks: Near Highway 50" FontSize="14" TextColor="#111827" />
                            <Label Text="Location: (14.6300° N, 120.9550° E)" FontSize="14" TextColor="#111827" />
                            <Label Text="Image Uploaded: (Click to view)"
                                   FontSize="14"
                                   TextColor="#3B82F6"
                                   GestureRecognizers="{StaticResource TapGesture}" />
                            <Label Text="Status: Rescued successfully"
                                   FontSize="14"
                                   TextColor="#4CAF50"
                                   FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Frame>

                </VerticalStackLayout>
            </ScrollView>

        </Grid>

    </AbsoluteLayout>
</ContentPage>
